     GVDEPS = pango cairo gts rsvg tcl tk libxml2 libxslt gd

# ghostscript

all: ${GVDEPS}

   AUTOCONF = autoconf-2.63.tar.gz
   AUTOMAKE = automake-1.10.1.tar.gz
      BISON = bison-2.3.tar.gz
      CAIRO = cairo-1.8.0.tar.gz
  COREUTILS = coreutils-6.12.tar.gz
        CVS = cvs-1.11.23.tar.gz
      EXPAT = expat-2.0.1.tar.gz
  FINDUTILS = findutils-4.4.0.tar.gz
       FLEX = flex-2.5.35.tar.gz
 FONTCONFIG = fontconfig-2.6.0.tar.gz
   FREETYPE = freetype-2.3.7.tar.gz
       GAWK = gawk-3.1.5.tar.gz
         GD = gd-2.0.36RC1.tar.gz
    GETTEXT = gettext-0.17.tar.gz
GHOSTSCRIPT = ghostscript-8.63.tar.gz
       GLIB = glib-2.18.2.tar.gz
       GREP = grep-2.5.3.tar.gz
        GTK = gtk+-2.14.4.tar.gz
        GTS = gts-0.7.6.tar.gz
       GZIP = gzip-1.3.12.tar.gz
   LIBICONV = libiconv-1.12.tar.gz
     LIBPNG = libpng-1.2.31.tar.gz
    LIBRSVG = librsvg-2.22.3.tar.gz
    LIBTOOL = libtool-2.2.6a.tar.gz
    LIBXML2 = libxml2-sources-2.7.2.tar.gz
    LIBXSLT = libxslt-1.1.24.tar.gz
         M4 = m4-1.4.12.tar.gz
       MAKE = make-3.81.tar.gz
      PANGO = pango-1.22.0.tar.gz
     PIXMAN = pixman-0.12.0.tar.gz
  PKGCONFIG = pkg-config-0.23.tar.gz
        SED = sed-4.1.5.tar.gz
       SWIG = swig-1.3.35.tar.gz
        TAR = tar-1.20.tar.gz
        TCL = tcl8.6a3-src.tar.gz
         TK = tk8.6a3-src.tar.gz
       WGET = wget-1.11.4.tar.gz
       ZLIB = zlib-1.2.3.tar.gz

allsrc:	${AUTOCONF} ${AUTOMAKE} ${BISON} ${CAIRO} ${COREUTILS} ${CVS} \
	${EXPAT} ${FINDUTILS} ${FLEX} ${FONTCONFIG} ${FREETYPE} ${GAWK} \
	${GD} ${GETTEXT} ${GHOSTSCRIPT} ${GLIB} ${GREP} ${GTK} ${GTS} \
	${GZIP} ${LIBICONV} ${LIBPNG} ${LIBRSVG} ${LIBTOOL} ${LIBXML2} \
	${LIBXSLT} ${M4} ${MAKE} ${PANGO} ${PIXMAN} ${PKGCONFIG} ${SED} \
	${SWIG} ${TAR} ${TCL} ${TK} ${WGET} ${ZLIB} 

${AUTOCONF}:
	@wget@ --passive-ftp ftp://ftp.gnu.org/pub/gnu/autoconf/${AUTOCONF}
${AUTOMAKE}:
	@wget@ --passive-ftp ftp://ftp.gnu.org/pub/gnu/automake/${AUTOMAKE}
${BISON}:
	@wget@ --passive-ftp ftp://ftp.gnu.org/pub/gnu/bison/${BISON}
${CAIRO}:
	@wget@ http://www.cairographics.org/releases/${CAIRO}
${COREUTILS}:
	@wget@ --passive-ftp ftp://ftp.gnu.org/pub/gnu/coreutils/${COREUTILS}
${CVS}:
	@wget@ http://ftp.gnu.org/non-gnu/cvs/source/stable/1.11.23/${CVS}
${EXPAT}:
	@wget@ http://prdownloads.sourceforge.net/expat/${EXPAT}?download
${FINDUTILS}:
	@wget@ --passive-ftp ftp://ftp.gnu.org/pub/gnu/findutils/${FINDUTILS}
${FLEX}:
	@wget@ http://prdownloads.sourceforge.net/flex/${FLEX}?download
${FONTCONFIG}:
	@wget@ http://fontconfig.org/release/${FONTCONFIG}
${FREETYPE}:
	@wget@ http://download.savannah.gnu.org/releases/freetype/${FREETYPE}
${GAWK}:
	@wget@ --passive-ftp ftp://ftp.gnu.org/pub/gnu/gawk/${GAWK}
${GD}:
	@wget@ http://www.libgd.org/releases/${GD}
${GETTEXT}:
	@wget@ --passive-ftp ftp://ftp.gnu.org/pub/gnu/gettext/${GETTEXT}
${GHOSTSCRIPT}:
	@wget@ http://ghostscript.com/releases/${GHOSTSCRIPT}
${GLIB}:
	@wget@ http://ftp.gnome.org/pub/gnome/sources/glib/2.18/${GLIB}
${GREP}:
	@wget@ --passive-ftp ftp://ftp.gnu.org/pub/gnu/grep/${GREP}
${GTK}:
	@wget@ http://ftp.gnome.org/pub/gnome/sources/gtk+/2.14/${GTK}
${GTS}:
	@wget@ http://prdownloads.sourceforge.net/gts/${GTS}?download
${GZIP}:
	@wget@ --passive-ftp ftp://ftp.gnu.org/pub/gnu/gzip/${GZIP}
${LIBICONV}:
	@wget@ --passive-ftp ftp://ftp.gnu.org/pub/gnu/libiconv/${LIBICONV}
${LIBPNG}:
	@wget@ http://prdownloads.sourceforge.net/libpng/${LIBPNG}?download
${LIBRSVG}:
	@wget@ http://ftp.gnome.org/pub/GNOME/sources/librsvg/2.22/${LIBRSVG}
${LIBTOOL}:
	@wget@ --passive-ftp ftp://ftp.gnu.org/pub/gnu/libtool/${LIBTOOL}
${LIBXML2}:
	@wget@ --passive-ftp ftp://xmlsoft.org/libxml2/${LIBXML2}
${LIBXSLT}:
	@wget@ --passive-ftp ftp://xmlsoft.org/libxml2/${LIBXSLT}
${M4}:
	@wget@ --passive-ftp ftp://ftp.gnu.org/pub/gnu/m4/${M4}
${MAKE}:
	@wget@ --passive-ftp ftp://ftp.gnu.org/pub/gnu/make/${MAKE}
${PANGO}:
	@wget@ http://ftp.gnome.org/pub/GNOME/sources/pango/1.22/${PANGO}
${PIXMAN}:
	@wget@ http://www.cairographics.org/releases/${PIXMAN}
${PKGCONFIG}:
	@wget@ http://pkg-config.freedesktop.org/releases/${PKGCONFIG}
${SED}:
	@wget@ --passive-ftp ftp://ftp.gnu.org/pub/gnu/sed/${SED}
${SWIG}:
	@wget@ http://prdownloads.sourceforge.net/swig/${SWIG}
${TAR}:
	@wget@ --passive-ftp ftp://ftp.gnu.org/pub/gnu/tar/${TAR}
${TCL}:
	@wget@ http://prdownloads.sourceforge.net/tcl/${TCL}
${TK}:
	@wget@ http://prdownloads.sourceforge.net/tcl/${TK}
${WGET}:
	@wget@ --passive-ftp ftp://ftp.gnu.org/pub/gnu/wget/${WGET}
${ZLIB}:
	@wget@ http://www.zlib.net/${ZLIB}


@prefix@:
	mkdir -p @prefix@
	
BASETOOLS = @prefix@ make bison flex pkg-config sed tar tclsh8.6 wget 

#gawk gzip grep coreutils findutils

allbasetools: ${BASETOOLS}

CVSTOOLS = ${BASETOOLS} cvs autoconf automake libtoolize swig

allcvstools: ${CVSTOOLS}

autoconf: ${AUTOCONF} ${BASETOOLS}
	zcat ${AUTOCONF} | tar xf -
	(cd `echo ${AUTOCONF} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch autoconf;
automake: ${AUTOMAKE} ${BASETOOLS}
	zcat ${AUTOMAKE} | tar xf -
	(cd `echo ${AUTOMAKE} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
bison: ${BISON} make
	zcat ${BISON} | tar xf -
	(cd `echo ${BISON} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch bison
cairo: ${CAIRO} ${BASETOOLS} pixman freetype libpng
	zcat ${CAIRO} | tar xf -
	(cd `echo ${CAIRO} | sed s/.tar.gz//`; ./configure --prefix=@prefix@ --disable-visibility --disable-xlib-xrender; make install)
	touch cairo
coreutils: ${COREUTILS}
	zcat ${COREUTILS} | tar xf -
	(cd `echo ${COREUTILS} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch coreutils
cvs: ${CVS} ${BASETOOLS}
	zcat ${CVS} | tar xf -
	(cd `echo ${CVS} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch cvs
expat: ${EXPAT} ${BASETOOLS}
	zcat ${EXPAT} | tar xf -
	(cd `echo ${EXPAT} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch expat
findutils: ${FINDUTILS} ${BASETOOLS}
	zcat ${FINDUTILS} | tar xf -
	(cd `echo ${FINDUTILS} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch findutils
flex: ${FLEX} make
	zcat ${FLEX} | tar xf -
	(cd `echo ${FLEX} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make; make install)
	touch flex
fontconfig: ${FONTCONFIG} ${BASETOOLS} freetype expat
	zcat ${FONTCONFIG} | tar xf -
	(cd `echo ${FONTCONFIG} | sed s/.tar.gz//`; ./configure --prefix=@prefix@ --disable-docs; make install)
	touch fontconfig
freetype: ${FREETYPE} ${BASETOOLS}
	zcat ${FREETYPE} | tar xf -
	(cd `echo ${FREETYPE} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch freetype
gawk: ${GAWK} make 
	zcat ${GAWK} | tar xf -
	(cd `echo ${GAWK} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch gawk
gd: ${GD} ${BASETOOLS}
	zcat ${GD} | tar xf -
	(cd `echo ${GD} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch gd
gettext: ${GETTEXT} make
	zcat ${GETTEXT} | tar xf -
	(cd `echo ${GETTEXT} | sed s/.tar.gz//`; ./configure --prefix=@prefix@ --disable-java; make LIBS="-lsec"; make install)
	touch gettext
ghostscript: ${GHOSTSCRIPT} ${BASETOOLS} fontconfig
	zcat ${GHOSTSCRIPT} | tar xf -
	(cd `echo ${GHOSTSCRIPT} | sed s/.tar.gz//`; ./configure --prefix=@prefix@ --disable-cups --enable-dynamic --with-drivers=CAIRO; make install soinstall)
	touch ghostscript
glib: ${GLIB} ${BASETOOLS} gettext
	zcat ${GLIB} | tar xf -
	(cd `echo ${GLIB} | sed s/.tar.gz//`; ./configure --prefix=@prefix@ --disable-visibility; make install)
	touch glib
grep: ${GREP} make gettext
	zcat ${GREP} | tar xf -
	(cd `echo ${GREP} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch grep
gtk: ${GTK} ${BASETOOLS}
	zcat ${GTK} | tar xf -
	(cd `echo ${GTK} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
gts: ${GTS} ${BASETOOLS}
	zcat ${GTS} | tar xf -
	(cd `echo ${GTS} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch gts
gzip: ${GZIP} make
	zcat ${GZIP} | tar xf -
	(cd `echo ${GZIP} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
iconv: ${LIBICONV} make
	zcat ${LIBICONV} | tar xf -
	(cd `echo ${LIBICONV} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch iconv
libpng: ${LIBPNG} ${BASETOOLS}
	zcat ${LIBPNG} | tar xf -
	(cd `echo ${LIBPNG} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch libpng
rsvg: ${LIBRSVG} ${BASETOOLS}
	zcat ${LIBRSVG} | tar xf -
	(cd `echo ${LIBRSVG} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch rsvg
libtool: ${LIBTOOL} ${BASETOOLS}
	zcat ${LIBTOOL} | tar xf -
	(cd `echo ${LIBTOOL} | sed s/.tar.gz// | sed s/a$$//`; ./configure --prefix=@prefix@; make install)
	touch libtool
libxml2: ${LIBXML2} ${BASETOOLS}
	zcat ${LIBXML2} | tar xf -
	(cd `echo ${LIBXML2} | sed s/.tar.gz// | sed s/-sources//`; ./configure --prefix=@prefix@; make install)
	touch libxml2
libxslt: ${LIBXSLT} ${BASETOOLS}
	zcat ${LIBXSLT} | tar xf -
	(cd `echo ${LIBXSLT} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch libxslt
m4: ${M4} ${BASETOOLS}
	zcat ${M4} | tar xf -
	(cd `echo ${M4} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch m4
make: ${MAKE}
	zcat ${MAKE} | tar xf -
	(cd `echo ${MAKE} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make; make install)
	touch make
pango: ${PANGO} ${BASETOOLS} glib fontconfig cairo
	zcat ${PANGO} | tar xf -
	(cd `echo ${PANGO} | sed s/.tar.gz//`; ./configure --prefix=@prefix@ --disable-visibility; make install)
	touch pango
pixman: ${PIXMAN} ${BASETOOLS}
	zcat ${PIXMAN} | tar xf -
	(cd `echo ${PIXMAN} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch pixman
pkg-config: ${PKGCONFIG} make
	zcat ${PKGCONFIG} | tar xf -
	(cd `echo ${PKGCONFIG} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch pkg-config
sed: ${SED} make
	zcat ${SED} | tar xf -
	patch -p0 <sed-4.1.5_lib_regcomp.c.patch
	patch -p0 <sed-4.1.5_lib_regexec.c.patch
	(cd `echo ${SED} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
swig: ${SWIG} ${BASETOOLS}
	zcat ${SWIG} | tar xf -
	(cd `echo ${SWIG} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch swig
tar: ${TAR} make
	zcat ${TAR} | tar xf -
	(cd `echo ${TAR} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch tar
tcl: ${TCL} make
	zcat ${TCL} | tar xf -
	(cd `echo ${TCL} | sed s/.tar.gz// | sed s/-src$$/\\\/unix/`; ./configure --prefix=@prefix@; make install)
	touch tcl
tk: ${TK} tcl
	zcat ${TK} | tar xf -
	patch -p0 <tk8.6a3.patch
	(cd `echo ${TK} | sed s/.tar.gz// | sed s/-src$$/\\\/unix/`; ./configure --prefix=@prefix@; make install)
	touch tk
wget: ${WGET} make
	zcat ${WGET} | tar xf -
	(cd `echo ${WGET} | sed s/.tar.gz//`; ./configure --prefix=@prefix@; make install)
	touch wget
zlib: ${ZLIB} make
	zcat ${ZLIB} | tar xf -
	(cd `echo ${ZLIB} | sed s/.tar.gz//`; ./configure --prefix=@prefix@ --shared; make install)
	touch zlib
